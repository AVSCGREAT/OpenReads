$def with(title, key, query='', sorts='', limit=None, min_books=7, test=False)

$ results = get_editions_by_ia_query(query=query, sorts=sorts)
$ books = results.editions
$ url = results.browse_url
$ sorts = ','.join(sorts) if sorts else ''
$ load_more_url = '/browse.json?q=%s&sorts=%s' % (query, sorts)
$ load_more = {"url": load_more_url, "mode": "page", "limit": limit}

$:render_template("books/custom_carousel", books, title=title, url=url, key=key, min_books=min_books, load_more=load_more, test=test)
